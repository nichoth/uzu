const {h} = require('../html')
const stream = require('../stream')

// pass in an array of strings
const dropdown = (items) => {
  const itemArr = items.map(itemDiv)
  const selectedItem = stream.defaultTo(
    'Select something!'
  , stream.merge(itemArr.map(div => div.selectItem))
  )

  const itemDivs = h('div', {}, itemArr.map(i => i.elm))
  const current  = h('div', {}, [h('strong', {}, selectedItem)])
  const wrapper  = h('div', {}, [current, itemDivs])

  return {
    elm: wrapper
  , streams: {selectedItem}
  }
}

const itemDiv = item => {
  const div = h('div', {}, item)
  const selectItem = stream.always(item, stream.fromEvent(div, 'mouseover'))
  return {elm: div, selectItem}
}

const dd = dropdown(['cupcakes', 'every', 'thursday'])
document.body.appendChild(dd.elm)
